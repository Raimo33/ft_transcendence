syntax = "proto3";

package tournament;

import "common.proto";

service TournamentService
{
    rpc GetUserTournaments    (GetUserTournamentsRequest)   returns (GetUserTournamentsResponse) {}
    rpc CreateTournament      (CreateTournamentRequest)     returns (CreateTournamentResponse) {}
    rpc JoinTournament        (JoinTournamentRequest)       returns (JoinTournamentResponse) {}
    rpc GetTournament         (GetTournamentRequest)        returns (GetTournamentResponse) {}
    rpc ForceStartTournament  (ForceStartTournamentRet)     returns (ForceStartTournamentRese) {}
    rpc AbandonTournament     (AbandonTournamentRequest)    returns (AbandonTournamentResponse) {}
}

enum player_tournament_sorting_options
{
    AGE = 0;
    DURATION = 1;
    NUMBER_OF_PLAYERS = 2;
    POSITION = 3;
}

message player_tournament_filters
{
    optional tournament_mode    mode = 1;
    optional tournament_status  status = 2;
    optional uint32             position = 3;
    // Add more filter options here
}

// v1/users/{user_id}/tournaments GET
message GetUserTournamentsRequest
{
    string                                     user_id = 1;
    optional uint32                            limit = 2;
    optional uint32                            offset = 3;
    optional player_tournament_sorting_options sort_by = 4;
    optional player_tournament_filters         filters = 5;
}
message GetUserTournamentsResponse
{
    response_outcome             outcome = 1;
    optional repeated tournament tournaments = 2;
}

// v1/tournaments POST
message CreateTournamentRequest
{
    repeated string           invided_users_ids = 1;
    optional tournament_mode  mode = 2;
}
message CreateTournamentResponse
{
    response_outcome  outcome = 1;
    optional string   tournament_id = 2;
}

// v1/tournaments/{tournament_id} POST
message JoinTournamentRequest
{
    string  tournament_id = 1;
}
message JoinTournamentResponse
{
    response_outcome    outcome = 1;
}

// v1/tournaments/{tournament_id} GET
message GetTournamentRequest
{
    string  tournament_id = 1;
}
message GetTournamentResponse
{
    response_outcome     outcome = 1;
    optional tournament  tournament = 2;
}

// v1/tournaments/{tournament_id} PATCH
message ForceStartTournamentRet
{
    string tournament_id = 1;
}
message ForceStartTournamentRese
{
    response_outcome     outcome = 1;
}

// v1/tournaments/{tournament_id} DELETE
message AbandonTournamentRequest
{
    string tournament_id = 1;
}
message AbandonTournamentResponse
{
    response_outcome  outcome = 1;
}