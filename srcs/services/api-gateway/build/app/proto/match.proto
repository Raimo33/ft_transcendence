syntax = "proto3";

package match;

import "common.proto";

service MatchService
{
    rpc GetUserMatches     (GetUserMatchesRequest)    returns (GetUserMatchesResponse) {}
    rpc CreateMatch        (CreateMatchRequest)       returns (CreateMatchResponse) {}
    rpc JoinMatch          (JoinMatchRequest)         returns (JoinMatchResponse) {}
    rpc GetMatch           (GetMatchRequest)          returns (GetMatchResponse) {}
    rpc AbandonMatch       (AbandonMatchRequest)      returns (AbandonMatchResponse) {}
}

enum player_match_sorting_options
{
    AGE = 0;
    DURATION = 1;
    NUMBER_OF_PLAYERS = 2;
    POSITION = 3;
    // Add more sorting options here
}

message player_match_filters
{
    optional match_status  status = 1;
    optional uint32        position = 2;
    // Add more filter options here
}

// v1/users/{user_id}/matches GET
message GetUserMatchesRequest
{
    string                                 requesting_user_id = 1;
    string                                 user_id = 1;
    optional uint32                        limit = 2;
    optional uint32                        offset = 3;
    optional player_match_sorting_options  sort_by = 4;
    optional player_match_filters          filters = 5;
}
message GetUserMatchesResponse
{
    response_outcome         outcome = 1;
    optional repeated match  matches = 2;
}

// v1/matches POST
message CreateMatchRequest
{
    string                   requesting_user_id = 1;
    repeated string          invited_users_ids = 1;
    optional match_settings  settings = 2;
}
message CreateMatchResponse
{
    response_outcome  outcome = 1;
    optional string   match_id = 2;
}

// v1/matches/{match_id} POST
message JoinMatchRequest
{
    string  requesting_user_id = 1;
    string  match_id = 1;
}
message JoinMatchResponse
{
    response_outcome  outcome = 1;
}

// v1/matches/{match_id} GET
message GetMatchRequest
{
    string  requesting_user_id = 1;
    string  match_id = 1;
}
message GetMatchResponse
{
    response_outcome  outcome = 1;
    optional match    match = 2;
}

// v1/matches/{match_id} DELETE
message AbandonMatchRequest
{
    string  requesting_user_id = 1;
    string  match_id = 1;
}
message AbandonMatchResponse
{
    response_outcome  outcome = 1;
}