# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    API_swagger.yaml                                   :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: craimond <bomboclat@bidol.juis>            +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2024/10/05 19:23:58 by craimond          #+#    #+#              #
#    Updated: 2024/10/31 20:07:10 by craimond         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

openapi: 3.0.0
info:
  title: Pongfumasters API
  description: REST-ful API to interact with the Pongfumasters gateway.
  version: 1.0.0
servers:
  - url: /api/v1
    description: Main API server
security:
  - jwtAuth: []
paths:
  /ping:
    get:
      operationId: ping
      summary: Ping the API
      description: Returns a simple pong response to check if the API is alive.
      responses:
        "200":
          description: API is responsive.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
          content:
            text/plain:
              schema:
                type: string
                example: "pong"

  /users:
    post:
      operationId: registerUser
      summary: User registration
      description: Register a new user in the system by providing email, password, display name, and other optional fields.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  $ref: "#/components/schemas/user_email"
                password:
                  $ref: "#/components/schemas/user_psw"
                display_name:
                  $ref: "#/components/schemas/user_display_name"
                avatar:
                  $ref: "#/components/schemas/user_avatar"
              required: [email, password, display_name]
              additionalProperties: false
        required: true
      responses:
        "201":
          description: User registration successful.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
          content:
            application/json:
              schema:
                type: object
                properties:
                  user_id:
                    $ref: "#/components/schemas/user_id"
                required: [user_id]
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
  /users/{user_id}/profile:
    get:
      operationId: getUserProfile
      summary: Get user profile
      description: Retrieve the public profile of a user account by providing the user ID.
      parameters:
        - $ref: '#/components/parameters/user_id'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Returns the Public User object of the specified user.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "304":
          $ref: '#/components/responses/NotModified'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /users/{user_id}/status:
    get:
      operationId: getUserStatus
      summary: Get user status
      description: Retrieve the status of a specific user.
      parameters:
        - $ref: '#/components/parameters/user_id'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Returns the status of the user.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: "#/components/schemas/user_status"
                required: [status]
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /users/{user_id}/matches:
    get:
      operationId: getUserMatches
      summary: Get list of user matches.
      description: Returns the list of matches a user has ever played in.
      parameters:
        - $ref: '#/components/parameters/user_id'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/player_match_sorting_options'
        - $ref: '#/components/parameters/player_match_filter_options'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Matches list successfully retrieved.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Match"
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /users/{user_id}/tournaments:
    get:
      operationId: getUserTournaments
      summary: Get list of user tournaments.
      description: Returns the list of tournaments a user has ever participated in.
      parameters:
        - $ref: '#/components/parameters/user_id'
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/player_tournament_sorting_options'
        - $ref: '#/components/parameters/player_tournament_filter_options'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Tournaments list successfully retrieved.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/Tournament"
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'

  /user:
    delete:
      operationId: deleteOwnAccount
      summary: Delete a user account
      description: Permanently delete the account of the current user.
      parameters:
        - $ref: '#/components/parameters/user_id'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/profile:
    get:
      operationId: getOwnProfile
      summary: Get current user's profile
      description: Retrieve detailed information about the current user.
      parameters:
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Returns the Private User object of the specified user.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
    patch:
      operationId: updateOwnProfile
      summary: Update user profile
      description: Update the public profile of the current user.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                display_name:
                  $ref: "#/components/schemas/user_display_name"
                avatar:
                  $ref: "#/components/schemas/user_avatar"
              required: []
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/password:
    put:
      operationId: updateOwnPassword
      summary: Update user password
      description: Update the password of the current user account.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                current_password:
                  $ref: "#/components/schemas/user_psw"
                new_password:
                  $ref: "#/components/schemas/user_psw"
                totp_code:
                  $ref: "#/components/schemas/totp_code"
              required: [current_password, new_password]
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/password/reset:
    post:
      operationId: requestPasswordReset
      summary: Request password reset
      description: Sends a password reset link to the registered email address.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  $ref: "#/components/schemas/user_email"
              required: [email]
              additionalProperties: false
        required: true
      responses:
          "204":
            $ref: '#/components/responses/NoContent'
          "411":
            $ref: '#/components/responses/LengthRequired'
          "413":
            $ref: '#/components/responses/ContentTooLarge'
          "431":
            $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/password/reset/{token}:
    post:
      operationId: checkPasswordResetToken
      summary: Check the password reset token
      description: Check the validity of the password reset token provided by the user.
      parameters:
        - $ref: '#/components/parameters/token'
        - $ref: '#/components/parameters/Content-Length'
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    patch:
      operationId: resetPassword
      summary: Reset user password
      description: Reset the password of the user account using the provided token.
      parameters:
        - $ref: '#/components/parameters/token'
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                new_password:
                  $ref: "#/components/schemas/user_psw"
              required: [new_password]
              additionalProperties: false
        required: true
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/email:
    patch:
      operationId: updateOwnEmail
      summary: Update user email
      description: Update the email address of the current user account.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                new_email:
                  $ref: "#/components/schemas/user_email"
                current_password:
                  $ref: "#/components/schemas/user_psw"
                totp_code:
                  $ref: "#/components/schemas/totp_code"
              required: [new_email, current_password]
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/email/verify:
    post:
      operationId: verifyOwnEmail
      summary: Generate email verification token
      description: Receive via email the verification token to be provided in the next request.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/email/verify/{token}:
    post:
      operationId: checkEmailVerificationToken
      summary: Check the email verification token
      description: Verify the email verification token provided by the user.
      parameters:
        - $ref: '#/components/parameters/token'
        - $ref: '#/components/parameters/Content-Length'
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'    
  /user/2fa:
    post:
      operationId: enable2FA
      summary: Setup 2fa
      description: Enable two-factor authentication for the current user account.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Two-factor authentication successfully enabled.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
          content:
            application/json:
              schema:
                type: object
                properties:
                  totp_secret:
                    $ref: "#/components/schemas/totp_secret"
                required: [totp_secret]
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    get:
      operationId: get2FAStatus
      summary: Get 2fa status
      description: Retrieve the two-factor authentication status of a user account.
      parameters:
        - $ref: '#/components/parameters/user_id'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Returns the 2fa status of the specified user.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
          content:
            application/json:
              schema:
                type: object
                properties:
                  two_factor_auth_status:
                    $ref: "#/components/schemas/two_factor_auth_status"
                required: [two_factor_auth_status]
        "401":
          $ref: '#/components/responses/Unauthorized'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    delete:
      operationId: disable2FA
      summary: Disable 2fa
      description: Disable two-factor authentication for a user account.
      parameters:
        - $ref: '#/components/parameters/user_id'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/2fa/verify:
    post:
      operationId: verify2FACode
      summary: Verify 2fa code
      description: Verify the two-factor authentication code provided by the user.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                totp_code:
                  $ref: "#/components/schemas/totp_code"
              required: [totp_code]
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/login:
    post:
      operationId: loginUser
      summary: User login
      description: Authenticate the user and return a JWT token for session management.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  $ref: "#/components/schemas/user_email"
                password:
                  $ref: "#/components/schemas/user_psw"
                totp_code:
                  $ref: "#/components/schemas/totp_code"
              required: [email, password]
              additionalProperties: false
        required: true
      responses:
        "200":
          description: User successfully logged in.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
          content:
            application/json:
              schema:
                type: object
                properties:
                  jwt_token:
                    $ref: "#/components/schemas/jwt_token"
                required: [jwt_token]
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/logout:
    delete:
      operationId: logoutUser
      summary: User logout
      description: Logs out the current user and invalidates the JWT token.
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/friends:
    post:
      operationId: addFriend
      summary: Add a friend
      description: Add a user to the friend list.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                friend_id:
                  $ref: "#/components/schemas/user_id"
              required: [friend_id]
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    get:
      operationId: getFriends
      summary: Get list of friends
      description: Retrieve the list of friends of the current user.
      parameters:
        - $ref: '#/components/parameters/limit'
        - $ref: '#/components/parameters/offset'
        - $ref: '#/components/parameters/profile_sorting_options'
        - $ref: '#/components/parameters/profile_filter_options'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      security:
        - jwtAuth: []
      responses:
        "200":
          description: Friends list successfully retrieved.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/user_id"
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /user/friends/{friend_id}:
    delete:
      operationId: removeFriend
      summary: Remove a friend
      description: Remove a user from the friend list.
      parameters:
        - $ref: '#/components/parameters/friend_id'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'

  /matches:
    post:
      operationId: createMatch
      summary: Start a new match
      description: Initialize a new Pong match by providing the match settings and the opponent user IDs.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                settings:
                  $ref: "#/components/schemas/MatchSettings"
                invited_users:
                  type: array
                  items:
                    $ref: "#/components/schemas/user_id"
              required: [invited_users]
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "201":
          description: Returns the match ID of the newly created match.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                type: object
                properties:
                  match_id:
                    $ref: "#/components/schemas/match_id"
                required: [match_id]
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /matches/{match_id}:
    post:
      operationId: joinMatch
      summary: Join an ongoing match
      description: Allows a user to join an ongoing match by providing the match ID.
      parameters:
        - $ref: '#/components/parameters/match_id'
        - $ref: '#/components/parameters/Content-Length'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    get:
      operationId: getMatch
      summary: Get match info
      description: Retrieve details about a specific match using its ID.
      parameters:
        - $ref: '#/components/parameters/match_id'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      responses:
        "200":
          description: Returns match information.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Match"
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    delete:
      operationId: abandonMatch
      summary: Abandon the current match
      description: Exit and terminate the ongoing match.
      parameters:
        - $ref: '#/components/parameters/match_id'
        - $ref: '#/components/parameters/Content-Length'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'

  /tournaments:
    post:
      operationId: createTournament
      summary: Start a new tournament
      description: Initialize a new Pong tournament by providing a list of users to invite and tournament mode.
      parameters:
        - $ref: '#/components/parameters/Content-Length'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                mode:
                  $ref: "#/components/schemas/tournament_mode"
                invited_users:
                  type: array
                  items:
                    $ref: "#/components/schemas/user_id"
              required: [invited_users]
              additionalProperties: false
        required: true
      security:
        - jwtAuth: []
      responses:
        "201":
          description: Returns the tournament ID of the newly created tournament.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/tournament_id"
        "401":
          $ref: '#/components/responses/Unauthorized'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
  /tournaments/{tournament_id}:
    post:
      operationId: joinTournament
      summary: Join an ongoing tournament
      description: Allows an invited user to join an ongoing tournament by providing the tournament ID.
      parameters:
        - $ref: '#/components/parameters/tournament_id'
        - $ref: '#/components/parameters/Content-Length'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    get:
      operationId: getTournament
      summary: Get tournament info
      description: Retrieve details about a specific tournament using its ID.
      parameters:
        - $ref: '#/components/parameters/tournament_id'
        - $ref: '#/components/parameters/Cache-Control'
        - $ref: '#/components/parameters/If-None-Match'
      responses:
        "200":
          description: Returns match information.
          headers:
            Content-Length:
              $ref: '#/components/headers/Content-Length'
            X-Rate-Limit-Limit:
              $ref: '#/components/headers/X-Rate-Limit-Limit'
            X-Rate-Limit-Remaining:
              $ref: '#/components/headers/X-Rate-Limit-Remaining'
            X-Rate-Limit-Reset:
              $ref: '#/components/headers/X-Rate-Limit-Reset'
            X-Rate-Limit-Interval:
              $ref: '#/components/headers/X-Rate-Limit-Interval'
            Cache-Control:
              $ref: '#/components/headers/Cache-Control'
            ETag:
              $ref: '#/components/headers/ETag'
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Tournament"
        "304":
          $ref: '#/components/responses/NotModified'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "412":
          $ref: '#/components/responses/PreconditionFailed'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    patch:
      operationId: forceStartTournament
      summary: Force start a tournament
      description: Force start the tournament (even if not all players have accepted the invitation).
      parameters:
        - $ref: '#/components/parameters/tournament_id'
        - $ref: '#/components/parameters/Content-Length'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "411":
          $ref: '#/components/responses/LengthRequired'
        "413":
          $ref: '#/components/responses/ContentTooLarge'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'
    delete:
      operationId: abandonTournament
      summary: Abandon the specified tournament
      description: Exit and resign from the ongoing tournament.
      parameters:
        - $ref: '#/components/parameters/tournament_id'
      security:
        - jwtAuth: []
      responses:
        "204":
          $ref: '#/components/responses/NoContent'
        "401":
          $ref: '#/components/responses/Unauthorized'
        "403":
          $ref: '#/components/responses/Forbidden'
        "409":
          $ref: '#/components/responses/Conflict'
        "431":
          $ref: '#/components/responses/RequestHeaderFieldsTooLarge'

components:
  schemas:

    user_id:
      description: Unique identifier for the user (or AI bot) (UUID format or similar).
      type: string
      format: uuid
      example: 550e8400-e29b-41d4-a716-446655440000
    user_psw:
      description: User's password (plain-text) for authentication.
      type: string
      example: "StrongPassword123!"
    user_email:
      description: User's email address, used for login and notifications.
      type: string
      format: email
      example: "example@example.com"
    user_display_name:
      description: Display name of the user, visible to other players during gameplay.
      type: string
      example: "PongMaster123"
    user_avatar:
      description: User's avatar image in base64 encoding, used for profile picture, defaults to a generic avatar if not provided.
      type: string
      example: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABjklEQVRIS+2Vv0oDQRDG..."
    user_status:
      description: Current status of the user (online or offline).
      type: string
      enum: [online, offline]
      example: "online"

    match_id:
      description: Unique identifier for the match (UUID format or similar).
      type: string
      format: uuid
      example: 550e8400-e29b-41d4-a716-446655440000
    match_status:
      description: Current status of the match.
      type: string
      enum: [ongoing, completed, interrupted]
      example: "ongoing"
    match_ball_speed:
      description: Defines the speed of the ball in the match.
      type: integer
      format: int32
      minimum: 1
      maximum: 100
      example: 50
    match_max_duration:
      description: Maximum allowable duration (seconds) for the match.
      type: integer
      format: int32
      minimum: 60
      maximum: 3600
      example: 300
    match_starting_health_points:
      description: Initial health or lives given to each player at the start of the match.
      type: integer
      format: int32
      minimum: 1
      maximum: 100
      example: 3

    player_position:
      description: Position of the player in the leaderboard.
      type: integer
      format: int32
      minimum: 1
      example: 3

    tournament_id:
      description: Unique identifier for the tournament (UUID format or similar).
      type: string
      format: uuid
      example: 550e8400-e29b-41d4-a716-446655440000
    tournament_mode:
      description: Format of the tournament.
      type: string
      enum: [single_elimination, knockout, king_of_the_hill, ladder, round_robin]
      example: "king_of_the_hill"
    tournament_status:
      description: Current status of the tournament.
      type: string
      enum: [ongoing, completed, interrupted]
      example: "ongoing"
    timestamp:
      description: Timestamp in unix timestamp format.
      type: integer
      format: int64
      example: 1634265600

    two_factor_auth_status:
      description: Status of the 2FA authentication for the user.
      type: boolean
      example: true

    qr_code:
      description: URL to the QR code image.
      type: string
      format: uri
      example: "https://example.com/qr_code.png"
  
    totp_code:
      description: TOTP code generated by the user for 2FA authentication.
      type: string #string because it can contain leading zeros
      example: "123456"

    totp_secret:
      description: TOTP secret key for generating 2FA codes.
      type: string
      example: "otpauth://totp/{issuer}:{account}?secret={secret}&issuer={issuer}"

    totp_key:
      description: Represents a 2FA private key for a user.
      type: object
      properties:
        qr_code:
          $ref: "#/components/schemas/qr_code"
        secret:
          $ref: "#/components/schemas/totp_secret"

    jwt_token:
      description: JWT token for session management.
      type: string
      example: "<Header>.<Payload>.<Signature>"

    websocket_url:
      description: WebSocket URL for real-time interaction during the match. Used by clients to establish connections and interact with the game in real-time.
      type: string
      format: uri
      example: "wss://example.com/ws"

    UserProfile:
      description: Represents a public user profile with limited information.
      type: object
      properties: 
        user_id:
          $ref: "#/components/schemas/user_id"
        display_name:
          $ref: "#/components/schemas/user_display_name"
        avatar:
          $ref: "#/components/schemas/user_avatar"
        status:
          $ref: "#/components/schemas/user_status"
        last_active_timestamp:
          $ref: "#/components/schemas/timestamp"
        registered_timestamp:
          $ref: "#/components/schemas/timestamp"
      required: [user_id, display_name, avatar, status, last_active_timestamp, registered_timestamp]

    User:
      description: Represents a private user profile with additional information.
      type: object
      allOf:
        - $ref: "#/components/schemas/UserProfile"
        - properties:
            email:
              $ref: "#/components/schemas/user_email"
            two_factor_enabled:
              $ref: "#/components/schemas/two_factor_auth_status"
          additionalProperties: false
      required: [user_id, display_name, avatar, status, last_active_timestamp, email, two_factor_auth]

    MatchSettings:
      description: Settings and configurations for the match, such as ball speed, match duration, and player health.
      type: object
      properties:
        ball_speed:
          $ref: "#/components/schemas/match_ball_speed"
        max_duration:
          $ref: "#/components/schemas/match_max_duration"
        starting_health:
          $ref: "#/components/schemas/match_starting_health_points"

    Match:
      description: Represents a match of Pong between two players.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/match_id"
        websocket_url:
          $ref: "#/components/schemas/websocket_url"
        players:
          description: Array of user_ids representing the players in the match.
          type: array
          items:
            $ref: "#/components/schemas/user_id"
        status:
          $ref: "#/components/schemas/match_status"
        started_timestamp:
          $ref: "#/components/schemas/timestamp"
        finished_timestamp:
          $ref: "#/components/schemas/timestamp"
        settings:
          $ref: "#/components/schemas/MatchSettings"
        leaderboard:
          description: Array of user_ids in the order of their scores.
          type: array
          items:
            $ref: "#/components/schemas/user_id"
      required: [match_id, players, status, started_timestamp, match_settings]

    Tournament:
      description: Represents a Pong tournament, containing multiple matches and players.
      type: object
      properties:
        tournament_id:
          $ref: "#/components/schemas/tournament_id"
        tournament_mode:
          $ref: "#/components/schemas/tournament_mode"
        matches:
          description: Array of match_ids in the tournament.
          type: array
          items:
            $ref: "#/components/schemas/match_id"
        status:
          $ref: "#/components/schemas/tournament_status"
        started_timestamp:
          $ref: "#/components/schemas/timestamp"
        finished_timestamp:
          $ref: "#/components/schemas/timestamp"
        leaderboard:
          description: Array of user_ids in the order of their scores.
          type: array
          items:
            $ref: "#/components/schemas/user_id"
      required: [tournament_id, tournament_mode, matches, status, started_timestamp]

  parameters:

    #######################################################
    #                   Path Parameters                   #
    #######################################################

    user_id:
      description: Unique identifier of the user.
      name: user_id
      in: path
      schema:
        $ref: "#/components/schemas/user_id"
      required: true
    match_id:
      description: Unique identifier of the match.
      name: match_id
      in: path
      schema:
        $ref: "#/components/schemas/match_id"
      required: true
    tournament_id:
      description: Unique identifier of the tournament.
      name: tournament_id
      in: path
      schema:
        $ref: "#/components/schemas/tournament_id"
      required: true
    friend_id:
      description: Unique identifier of the friend.
      name: friend_id
      in: path
      schema:
        $ref: "#/components/schemas/user_id"
      required: true

    token:
      description: verification token for credentials recovery/validation
      name: token
      in: path
      schema:
        type: string
      required: true

    #######################################################
    #                     Headers                         #
    #######################################################

    Content-Length:
      description: The length of the request body in octets (8-bit bytes).
      name: Content-Length
      in: header
      schema:
        type: integer
        format: int32
        minimum: 0
      example: 12345
      required: true

    If-None-Match:
      description: ETag header for cache validation. The client can provide the ETag value from a previous request to check if the resource has changed.
      name: If-None-Match
      in: header
      schema:
        type: string
      example: "W/\"67ab43\""
      required: false

    Cache-Control:
      description: Cache control directives to influence caching behavior.
      name: Cache-Control
      in: header
      schema:
        type: string
      example: "public, max-age=3600"
      required: false

    #######################################################
    #                   Query Parameters                  #
    #######################################################

    profile_sorting_options:
      description: Options to sort the user profiles list.
      name: sort_by
      in: query
      schema:
        type: string
        enum: [display_name, registered_timestamp, last_active_timestamp]
      style: form
      explode: false
      required: false
    profile_filter_options:
      description: Options to filter the user profiles list.
      name: filters
      in: query
      schema:
        type: object
        properties:
          status:
            $ref: "#/components/schemas/user_status"
      style: deepObject
      explode: true
      required: false
  
    player_match_sorting_options:
      description: Options to sort the player's matches list.
      name: sort_by
      in: query
      schema:
        type: string
        enum: [age, duration, number_of_players, position]
      style: form
      explode: false
      required: false
    player_match_filter_options:
      description: Options to filter the player's matches list.
      name: filters
      in: query
      schema:
        type: object
        properties:
          status:
            $ref: "#/components/schemas/match_status"
          position:
            $ref: "#/components/schemas/player_position"
      style: deepObject
      explode: true
      required: false

    player_tournament_sorting_options:
      description: Options to sort the player's tournaments list.
      name: sort_by
      in: query
      schema:
        type: string
        enum: [age, duration, number_of_players, position]
      style: form
      explode: false
      required: false
    player_tournament_filter_options:
      description: Options to filter the player's tournaments list.
      name: filters
      in: query
      schema:
        type: object
        properties:
          mode:
            $ref: "#/components/schemas/tournament_mode"
          status:
            $ref: "#/components/schemas/tournament_status"
          position:
            $ref: "#/components/schemas/player_position"

    limit:
      description: Maximum number of items to return.
      name: limit
      in: query
      schema:
        type: integer
        format: int32
        minimum: 1
      required: false
    offset:
      description: Number of items to skip.
      name: offset
      in: query
      schema:
        type: integer
        format: int32
        minimum: 0
      required: false

  headers:

    X-Rate-Limit-Limit:
      description: Maximum number of requests allowed in the current window.
      schema:
        type: integer
        format: int32
        minimum: 1
      example: 100
    X-Rate-Limit-Remaining:
      description: Remaining number of requests allowed in the current window.
      schema:
        type: integer
        format: int32
        minimum: 0
      example: 99
    X-Rate-Limit-Reset:
      description: Time in seconds until the rate limit resets.
      schema:
        type: integer
        format: int32
        minimum: 0
      example: 60
    X-Rate-Limit-Interval:
      description: Time interval in seconds for the rate limit window.
      schema:
        type: integer
        format: int32
        minimum: 1
      example: 60
    Retry-After:
      description: Time in seconds until the client can retry the request.
      schema:
        type: integer
        format: int32
        minimum: 0
      example: 60

    ETag:
      description: An identifier for a specific version of a resource.
      schema:
        type: string
      example: "W/\"67ab43\""
    Cache-Control:
      description: Cache control directives for the response.
      schema:
        type: string
      example: "public, max-age=3600"

    Content-Length:
      description: The length of the request body in octets (8-bit bytes).
      schema:
        type: integer
        format: int32
        minimum: 0
      example: 12345

  responses:

    NoContent: #HTTP 204
      description: No content to return. The request was successful but there is no content to return.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    NotModified: #HTTP 304
      description: Not modified. The resource has not changed since the last request.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    Unauthorized: #HTTP 401
      description: Unauthorized. JWT token is missing or invalid.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    Forbidden: #HTTP 403
      description: Forbidden. The user does not have permission to perform the action.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    Conflict: #HTTP 409
      description: Conflict. The request could not be completed due to a conflict with the current state of the resource.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    LengthRequired: #HTTP 411
      description: Length required. The request did not specify the length of its content, which is required by the requested resource.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'
  
    PreconditionFailed: #HTTP 412
      description: Precondition failed. The server does not meet one of the preconditions that the requester put on the request.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    ContentTooLarge: #HTTP 413
      description: Content too large. The request is larger than the server is willing or able to process.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    RequestHeaderFieldsTooLarge: #HTTP 431
      description: Header fields too large. The server is unwilling to process the request because its header fields are too large.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'


    #######################################################
    #                 Generic Responses                   #
    #######################################################

    BadRequest: #HTTP 400
      description: Bad request. The request was invalid or cannot be served.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    NotFound: #HTTP 404
      description: Not found. The requested resource could not be found.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    MethodNotAllowed: #HTTP 405
      description: Method not allowed. The request method is known but not supported by the target resource.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    RequestTimeout: #HTTP 408
      description: Request timeout. Idle time has passed without any data being sent or received.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    UriTooLong: #HTTP 414
      description: URI too long. The URI provided was too long for the server to process.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    TooManyRequests: #HTTP 429
      description: Rate limit exceeded. Too many requests in a given time window.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'
        Retry-After:
          $ref: '#/components/headers/Retry-After'

    InternalServerError: #HTTP 500
      description: Internal server error. The server encountered an unexpected condition that prevented it from fulfilling the request.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    NotImplemented: #HTTP 501
      description: Not implemented. The server does not support the method or functionality required to fulfill the request.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    BadGateway: #HTTP 502
      description: Bad gateway. The server received an invalid response from an upstream server.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    ServiceUnavailable: #HTTP 503
      description: Service unavailable. The server is currently unable to handle the request due to a temporary overloading or maintenance of the server.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    GatewayTimeout: #HTTP 504
      description: Gateway timeout. The server did not receive a timely response from an upstream server it needed to access in order to complete the request.
      headers:
        X-Rate-Limit-Limit:
          $ref: '#/components/headers/X-Rate-Limit-Limit'
        X-Rate-Limit-Remaining:
          $ref: '#/components/headers/X-Rate-Limit-Remaining'
        X-Rate-Limit-Reset:
          $ref: '#/components/headers/X-Rate-Limit-Reset'
        X-Rate-Limit-Interval:
          $ref: '#/components/headers/X-Rate-Limit-Interval'

    ImATeaPot: #HTTP 418
      description: I'm a teapot. The server is a teapot, not a coffee machine.

  securitySchemes:
    jwtAuth:
      description: JWT used for authorization. Send the token in the `Authorization` header with the format `Bearer {token}`.
      type: http
      scheme: bearer
      bearerFormat: JWT