syntax = "proto3";

package tournament.api_gateway;


service TournamentAPIGatewayService
{
  rpc GetUserTournaments    (GetUserTournamentsRequest)   returns (GetUserTournamentsResponse) {}
  rpc CreateTournament      (CreateTournamentRequest)     returns (CreateTournamentResponse) {}
  rpc JoinTournament        (JoinTournamentRequest)       returns (JoinTournamentResponse) {}
  rpc GetTournament         (GetTournamentRequest)        returns (GetTournamentResponse) {}
  rpc LeaveTournament       (LeaveTournamentRequest)      returns (LeaveTournamentResponse) {}
}

message Tournament
{
  string           id                  = 1;
  string           mode                = 2;
  repeated string  match_ids           = 3;
  string           status              = 4;
  uint64           started_timestamp   = 5;
  uint64           finished_timestamp  = 6;
}

// v1/users/{user_id}/tournaments GET
message GetUserTournamentsRequest
{
  string  requester_user_id  = 1;
  string  user_id             = 2;
  uint32  limit               = 3;
  uint32  offset              = 4;
}
message GetUserTournamentsResponse
{
  repeated Tournament  tournaments = 2;
}

// v1/tournaments POST
message CreateTournamentRequest
{
  string           requester_user_id  = 1;
  repeated string  invided_users_ids   = 2;
  string           mode                = 3;
}
message CreateTournamentResponse
{
  string  tournament_id  = 2;
}

// v1/tournaments/{tournament_id} POST
message JoinTournamentRequest
{
  string  requester_user_id = 1;
  string  tournament_id      = 2;
}
message JoinTournamentResponse
{
}

// v1/tournaments/{tournament_id} GET
message GetTournamentRequest
{
  string requester_user_id  = 1;
  string tournament_id       = 2;
}
message GetTournamentResponse
{
  Tournament tournament    = 2;
}

// v1/tournaments/{tournament_id} DELETE
message LeaveTournamentRequest
{
  string requester_user_id  = 1;
  string tournament_id       = 2;
}
message LeaveTournamentResponse
{
}